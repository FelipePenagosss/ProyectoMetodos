{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet CrearStakeComponent = class CrearStakeComponent {\n  constructor(fb, router, toastr, competitorService, eventService, stakeService, aRouter) {\n    this.fb = fb;\n    this.router = router;\n    this.toastr = toastr;\n    this.competitorService = competitorService;\n    this.eventService = eventService;\n    this.stakeService = stakeService;\n    this.aRouter = aRouter;\n    this.competidores = [];\n    this.eventos = [];\n    this.titulo = 'Crear Participacion';\n    this.stakeForm = this.fb.group({\n      id: ['', Validators.required],\n      position: ['', Validators.required],\n      competitor: ['', Validators.required],\n      event: ['', Validators.required]\n    });\n    this.id = this.aRouter.snapshot.paramMap.get('id');\n  }\n  ngOnInit() {\n    this.obtenerCompetidores();\n    this.obtenerEventos();\n    this.esEditar();\n  }\n  agregarProducto() {\n    const stake = {\n      id: this.stakeForm.get('id')?.value,\n      position: this.stakeForm.get('position')?.value,\n      competitor: this.stakeForm.get('competitor')?.value,\n      event: this.stakeForm.get('event')?.value\n    };\n    if (this.id !== null) {\n      // Modo de edición\n      this.actualizarStake(stake);\n    } else {\n      // Modo de creación\n      this.guardarStake(stake, this.stakeForm.get('competitor')?.value, this.stakeForm.get('event')?.value);\n    }\n  }\n  guardarStake(stake, idC, idE) {\n    this.stakeService.saveStake(stake, idC, idE).subscribe(data => {\n      this.toastr.success('La participacion fue registrado con éxito!', 'Producto Registrado!');\n      this.router.navigate(['/mostrarStake']);\n    }, error => {\n      console.log(error);\n      this.stakeForm.reset();\n    });\n  }\n  actualizarStake(stake) {\n    this.stakeService.update(this.id, stake).subscribe(response => {\n      console.log(response);\n      this.toastr.success('La participacion fue actualizada con éxito!', 'Disciplina Actualizada');\n      this.router.navigate(['/mostrarStake']);\n    }, error => {\n      console.log(error);\n      this.stakeForm.reset();\n    });\n  }\n  esEditar() {\n    if (this.id !== null) {\n      this.titulo = 'Editar Participacion';\n      this.stakeService.getStakeById(this.id).subscribe(response => {\n        console.log(response);\n        const data = response.data;\n        console.log(data);\n        this.stakeForm.setValue({\n          id: data.id,\n          position: data.position,\n          competitor: data.competitor,\n          event: data.event\n        });\n        this.stakeForm.get('id')?.disable();\n        this.stakeForm.get('competitor')?.disable();\n        this.stakeForm.get('event')?.disable();\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n  obtenerCompetidores() {\n    this.competitorService.getCompetitor().subscribe(response => {\n      console.log(response);\n      const data = response.data;\n      if (Array.isArray(data)) {\n        this.competidores = data;\n        for (const iterator of this.competidores) {\n          console.log(iterator.name);\n        }\n      } else {\n        console.error('Los datos recibidos no son un array:', data);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  obtenerEventos() {\n    this.eventService.getEvent().subscribe(response => {\n      console.log(response);\n      const data = response.data;\n      if (Array.isArray(data)) {\n        this.eventos = data;\n        for (const iterator of this.eventos) {\n          console.log(iterator.name);\n        }\n      } else {\n        console.error('Los datos recibidos no son un array:', data);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n};\nCrearStakeComponent = __decorate([Component({\n  selector: 'app-crear-stake',\n  templateUrl: './crear-stake.component.html',\n  styleUrls: ['./crear-stake.component.css']\n})], CrearStakeComponent);\nexport { CrearStakeComponent };","map":{"version":3,"names":["Component","Validators","CrearStakeComponent","constructor","fb","router","toastr","competitorService","eventService","stakeService","aRouter","competidores","eventos","titulo","stakeForm","group","id","required","position","competitor","event","snapshot","paramMap","get","ngOnInit","obtenerCompetidores","obtenerEventos","esEditar","agregarProducto","stake","value","actualizarStake","guardarStake","idC","idE","saveStake","subscribe","data","success","navigate","error","console","log","reset","update","response","getStakeById","setValue","disable","getCompetitor","Array","isArray","iterator","name","getEvent","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\nenit\\Documents\\universidad\\Sem5\\Electiva2\\Angular\\proyectoF\\src\\app\\components\\crear-stake\\crear-stake.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Competitor} from 'src/app/models/Competitor';\nimport { Event} from 'src/app/models/Event';\nimport {Stake} from 'src/app/models/Stake';\nimport { CompetitorService } from 'src/app/services/competitor.service';\nimport { EventService } from 'src/app/services/event.service';\nimport { StakesService } from 'src/app/services/stakes.service';\n\n\n@Component({\n  selector: 'app-crear-stake',\n  templateUrl: './crear-stake.component.html',\n  styleUrls: ['./crear-stake.component.css']\n})\nexport class CrearStakeComponent {\n  competidores:Competitor[]=[];\n  eventos:Event[]=[];\n  stakeForm: FormGroup;\n  titulo = 'Crear Participacion';\n  id: string | null;\n  constructor(private fb: FormBuilder,\n              private router: Router,\n              private toastr: ToastrService,\n              private competitorService:CompetitorService,\n              private eventService:EventService,\n              private stakeService:StakesService,\n              private aRouter: ActivatedRoute) { \n    this.stakeForm = this.fb.group({\n      id:['',Validators.required],\n      position: ['', Validators.required],\n      competitor: ['', Validators.required],\n      event: ['', Validators.required],\n    })\n    this.id = this.aRouter.snapshot.paramMap.get('id');\n  }\n\n  ngOnInit(): void {\n    this.obtenerCompetidores();\n    this.obtenerEventos();\n    this.esEditar();\n  }\n  agregarProducto() {\n    const stake:Stake = {\n      id: this.stakeForm.get('id')?.value,\n      position: this.stakeForm.get('position')?.value,\n      competitor: this.stakeForm.get('competitor')?.value,\n      event: this.stakeForm.get('event')?.value\n    };\n  \n    if (this.id !== null) {\n      // Modo de edición\n      this.actualizarStake(stake);\n    } else {\n      // Modo de creación\n      this.guardarStake(stake,this.stakeForm.get('competitor')?.value,this.stakeForm.get('event')?.value);\n    }\n  }\n  guardarStake(stake:Stake,idC:String,idE:String) {\n    this.stakeService.saveStake(stake,idC,idE).subscribe(\n      data => {\n        this.toastr.success('La participacion fue registrado con éxito!', 'Producto Registrado!');\n        this.router.navigate(['/mostrarStake']);\n      },\n      error => {\n        console.log(error);\n        this.stakeForm.reset();\n      }\n    );\n  }\n  private actualizarStake(stake:Stake) {\n    this.stakeService.update(this.id!, stake).subscribe(\n      response => {\n        console.log(response);\n        this.toastr.success('La participacion fue actualizada con éxito!', 'Disciplina Actualizada');\n        this.router.navigate(['/mostrarStake']);\n      },\n      error => {\n        console.log(error);\n        this.stakeForm.reset();\n      }\n    );\n  }\n  esEditar() {\n    if (this.id !== null) {\n      this.titulo = 'Editar Participacion';\n      \n      this.stakeService.getStakeById(this.id).subscribe(\n        response => {\n          console.log(response);\n          const data = response.data;\n          console.log(data)\n          this.stakeForm.setValue({\n            id:data.id,\n            position : data.position,\n            competitor: data.competitor,\n            event:data.event\n          });\n          this.stakeForm.get('id')?.disable();\n          this.stakeForm.get('competitor')?.disable();\n          this.stakeForm.get('event')?.disable();\n        },\n        error => {\n          console.log(error);\n        });\n    }\n  }\n  obtenerCompetidores() {\n    this.competitorService.getCompetitor().subscribe(\n      response => {\n        console.log(response);\n        const data = response.data;\n        if (Array.isArray(data)) {\n          this.competidores = data;\n          for (const iterator of this.competidores) {\n            console.log(iterator.name);\n          }\n        } else {\n          console.error('Los datos recibidos no son un array:', data);\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n  obtenerEventos() {\n    this.eventService.getEvent().subscribe(\n      response => {\n        console.log(response);\n        const data = response.data;\n        if (Array.isArray(data)) {\n          this.eventos = data;\n          for (const iterator of this.eventos) {\n            console.log(iterator.name);\n          }\n        } else {\n          console.error('Los datos recibidos no son un array:', data);\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n \n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}