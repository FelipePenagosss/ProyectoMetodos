{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet CrearEventComponent = class CrearEventComponent {\n  constructor(fb, router, toastr, competitorService, disciplinaService, aRouter) {\n    this.fb = fb;\n    this.router = router;\n    this.toastr = toastr;\n    this.competitorService = competitorService;\n    this.disciplinaService = disciplinaService;\n    this.aRouter = aRouter;\n    this.disciplinas = [];\n    this.titulo = 'Crear Competidor';\n    this.competitorForm = this.fb.group({\n      id: ['', Validators.required],\n      name: ['', Validators.required],\n      surName: ['', Validators.required],\n      birthdate: ['', Validators.required],\n      discipline: ['', Validators.required]\n    });\n    this.id = this.aRouter.snapshot.paramMap.get('id');\n  }\n  ngOnInit() {\n    this.obtenerDisciplinas();\n    this.esEditar();\n  }\n  agregarProducto() {\n    const competitor = {\n      id: this.competitorForm.get('id')?.value,\n      name: this.competitorForm.get('name')?.value,\n      surName: this.competitorForm.get('surName')?.value,\n      birthdate: this.competitorForm.get('birthdate')?.value,\n      discipline: this.competitorForm.get('discipline')?.value,\n      stakes: []\n    };\n    if (this.id !== null) {\n      // Modo de edición\n      this.actualizarCompetitor(competitor);\n    } else {\n      // Modo de creación\n      this.guardarCompetitor(competitor, this.competitorForm.get('discipline')?.value);\n    }\n  }\n  guardarCompetitor(competitor, id) {\n    this.competitorService.saveCompetitor(competitor, id).subscribe(data => {\n      this.toastr.success('El Competidor fue registrado con éxito!', 'Producto Registrado!');\n      this.router.navigate(['/mostrarCompetitor']);\n    }, error => {\n      console.log(error);\n      this.competitorForm.reset();\n    });\n  }\n  actualizarCompetitor(competitor) {\n    this.competitorService.update(this.id, competitor).subscribe(response => {\n      console.log(response);\n      this.toastr.success('El competidor fue actualizada con éxito!', 'Disciplina Actualizada');\n      this.router.navigate(['/mostrarCompetitor']);\n    }, error => {\n      console.log(error);\n      this.competitorForm.reset();\n    });\n  }\n  esEditar() {\n    if (this.id !== null) {\n      this.titulo = 'Editar Competidor';\n      this.competitorService.getCompetitorById(this.id).subscribe(response => {\n        console.log(response);\n        const data = response.data;\n        console.log(data);\n        this.competitorForm.setValue({\n          id: data.id,\n          name: data.name,\n          surName: data.surName,\n          birthdate: data.birthdate,\n          discipline: data.discipline\n        });\n        this.competitorForm.get('id')?.disable();\n        this.competitorForm.get('discipline')?.disable();\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n  obtenerDisciplinas() {\n    this.disciplinaService.getDiscipline().subscribe(response => {\n      console.log(response);\n      const data = response.data;\n      if (Array.isArray(data)) {\n        this.disciplinas = data;\n        for (const iterator of this.disciplinas) {\n          console.log(iterator.name);\n        }\n      } else {\n        console.error('Los datos recibidos no son un array:', data);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n};\nCrearEventComponent = __decorate([Component({\n  selector: 'app-crear-event',\n  templateUrl: './crear-event.component.html',\n  styleUrls: ['./crear-event.component.css']\n})], CrearEventComponent);\nexport { CrearEventComponent };","map":{"version":3,"names":["Component","Validators","CrearEventComponent","constructor","fb","router","toastr","competitorService","disciplinaService","aRouter","disciplinas","titulo","competitorForm","group","id","required","name","surName","birthdate","discipline","snapshot","paramMap","get","ngOnInit","obtenerDisciplinas","esEditar","agregarProducto","competitor","value","stakes","actualizarCompetitor","guardarCompetitor","saveCompetitor","subscribe","data","success","navigate","error","console","log","reset","update","response","getCompetitorById","setValue","disable","getDiscipline","Array","isArray","iterator","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\nenit\\Documents\\universidad\\Sem5\\Electiva2\\Angular\\proyectoF\\src\\app\\components\\crear-event\\crear-event.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Event} from 'src/app/models/Event';\nimport { Disciplina} from 'src/app/models/Disciplina';\nimport { EventService } from 'src/app/services/event.service';\nimport { DisciplinaService } from 'src/app/services/disciplina.service';\n\n@Component({\n  selector: 'app-crear-event',\n  templateUrl: './crear-event.component.html',\n  styleUrls: ['./crear-event.component.css']\n})\nexport class CrearEventComponent {\n  disciplinas:Disciplina[]=[];\n  competitorForm: FormGroup;\n  titulo = 'Crear Competidor';\n  id: string | null;\n  constructor(private fb: FormBuilder,\n              private router: Router,\n              private toastr: ToastrService,\n              private competitorService:CompetitorService,\n              private disciplinaService:DisciplinaService,\n              private aRouter: ActivatedRoute) { \n    this.competitorForm = this.fb.group({\n      id:['',Validators.required],\n      name: ['', Validators.required],\n      surName: ['', Validators.required],\n      birthdate: ['', Validators.required],\n      discipline: ['', Validators.required],\n    })\n    this.id = this.aRouter.snapshot.paramMap.get('id');\n  }\n\n  ngOnInit(): void {\n    this.obtenerDisciplinas();\n    this.esEditar();\n  }\n  agregarProducto() {\n    const competitor:Competitor = {\n      id: this.competitorForm.get('id')?.value,\n      name: this.competitorForm.get('name')?.value,\n      surName: this.competitorForm.get('surName')?.value,\n      birthdate: this.competitorForm.get('birthdate')?.value,\n      discipline:this.competitorForm.get('discipline')?.value,\n     stakes:[]\n    };\n  \n    if (this.id !== null) {\n      // Modo de edición\n      this.actualizarCompetitor(competitor);\n    } else {\n      // Modo de creación\n      this.guardarCompetitor(competitor,this.competitorForm.get('discipline')?.value);\n    }\n  }\n  guardarCompetitor(competitor: Competitor,id:String) {\n    this.competitorService.saveCompetitor(competitor,id).subscribe(\n      data => {\n        this.toastr.success('El Competidor fue registrado con éxito!', 'Producto Registrado!');\n        this.router.navigate(['/mostrarCompetitor']);\n      },\n      error => {\n        console.log(error);\n        this.competitorForm.reset();\n      }\n    );\n  }\n  private actualizarCompetitor(competitor: Competitor) {\n    this.competitorService.update(this.id!, competitor).subscribe(\n      response => {\n        console.log(response);\n        this.toastr.success('El competidor fue actualizada con éxito!', 'Disciplina Actualizada');\n        this.router.navigate(['/mostrarCompetitor']);\n      },\n      error => {\n        console.log(error);\n        this.competitorForm.reset();\n      }\n    );\n  }\n  esEditar() {\n    if (this.id !== null) {\n      this.titulo = 'Editar Competidor';\n      \n      this.competitorService.getCompetitorById(this.id).subscribe(\n        response => {\n          console.log(response);\n          const data = response.data;\n          console.log(data)\n          this.competitorForm.setValue({\n            id:data.id,\n            name: data.name,\n            surName: data.surName,\n            birthdate:data.birthdate,\n            discipline:data.discipline\n          });\n          this.competitorForm.get('id')?.disable();\n          this.competitorForm.get('discipline')?.disable();\n        },\n        error => {\n          console.log(error);\n        });\n    }\n  }\n  obtenerDisciplinas() {\n    this.disciplinaService.getDiscipline().subscribe(\n      response => {\n        console.log(response);\n        const data = response.data;\n        if (Array.isArray(data)) {\n          this.disciplinas = data;\n          for (const iterator of this.disciplinas) {\n            console.log(iterator.name);\n          }\n        } else {\n          console.error('Los datos recibidos no son un array:', data);\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n \n\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}